import{f as i}from"./fetch-CZzGIe3w.js";/* empty css              *//* empty css                 */const u=async n=>{n.preventDefault();const e=document.querySelector(".registerForm"),t=e.querySelector("#username").value.trim(),c=e.querySelector("#password").value.trim(),s=e.querySelector("#email").value.trim(),r={username:t,password:c,email:s},l="http://localhost:3000/api/users",o={body:JSON.stringify(r),method:"POST",headers:{"Content-type":"application/json"}};console.log(o);const a=await i(l,o);if(a.error){console.error("Error adding a new user:",a.error);return}a.message&&console.log(a.message,"success"),console.log(a),e.reset()},m=async n=>{n.preventDefault();const e=document.querySelector(".loginForm"),t=e.querySelector("input[name=username]").value,c=e.querySelector("input[name=password]").value,s={username:t,password:c},r="http://localhost:3000/api/auth/login",l={body:JSON.stringify(s),method:"POST",headers:{"Content-type":"application/json"}};console.log(l);const o=await i(r,l);if(o.error){console.error("Error adding a new user:",o.error);return}o.message&&(console.log(o.message,"success"),localStorage.setItem("token",o.token),localStorage.setItem("nimi",o.user.username)),console.log(o),e.reset(),window.location.href="src/pages/diary.html"},g=async n=>{n.preventDefault();const e="http://localhost:3000/api/auth/me";let t={};t={Authorization:`Bearer ${localStorage.getItem("token")}`};const s={headers:t};console.log(s);const r=await i(e,s);if(r.error){console.error("Error getting personal data:",r.error);return}r.message&&console.log(r.message,"success"),console.log(r)},d=document.querySelector(".registerForm");d.addEventListener("submit",u);const p=document.querySelector(".loginForm");p.addEventListener("submit",m);const y=document.querySelector("#meRequest");y.addEventListener("click",g);
